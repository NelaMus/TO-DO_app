<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Moje TO-DO aplikace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <h1>Moje úkoly</h1>

    <p>
        Přihlášen jako <strong>{{ request.user.username }}</strong>
        <form action="{% url 'logout' %}" method="post" style="display:inline;">
        {% csrf_token %}
            <button type="submit">Odhlásit se</button>
        </form>
    </p>

    <form method="POST" action="{% url 'pridat_ukol' %}">
        {% if form.errors %}
            <p style="color: red;">{{ form.errors }}</p>
        {% endif %}
        {% csrf_token %}
        <input type="text" name="nazev" placeholder="Název úkolu" required>
        <input type="text" name="popis" placeholder="Popis úkolu">
        <button type="submit">Přidat úkol</button>
    </form>
    
    <h4>🟡 Nesplněné úkoly</h4><br>

    <ul>
        {% for ukol in nesplnene %}
        <li>
            {{ ukol.nazev }} - {{ ukol.popis }}<br>
            <a href="{% url 'splnit_ukol' ukol.id %}">Splnit</a>
            <a href="{% url 'upravit_ukol' ukol.id %}">Upravit</a>
            <a href="{% url 'smazat_ukol' ukol.id %}">Smazat 🗑</a>
        </li>
        {% empty %}
        <li>Již jsi splnil všechny své úkoly! Výborně, gratuluji!</li>
        {% endfor %}
    </ul>

<br><br>

    <h4>🟢 Splněné úkoly</h4><br>

    <ul>
        {% for ukol in splnene %}
        <li>
            <div style="color: rgb(92, 206, 12);">{{ ukol.nazev }} - {{ ukol.popis }}</div>
            <a href="{% url 'splnit_ukol' ukol.id %}">Označit jako nesplněný</a>
            <a href="{% url 'upravit_ukol' ukol.id %}">Upravit</a>
            <a href="{% url 'smazat_ukol' ukol.id %}">Smazat 🗑</a>
        </li>
        {% empty %}
        <li>Ještě jsi nesplnil žádné úkoly. Tak rychle do toho!</li>
        {% endfor %}
    </ul>
</body>
</html>
